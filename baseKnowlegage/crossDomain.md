####网站跨域问题

#####1.浏览器的同源策略

<p>
同源策略是浏览器最为基本也是必须遵守的安全策略，同源策略的存在，限制了“源”自A的脚本只能操作“同源”页面的DOM，“跨源”操作来自于B的页面会被拒绝，
</p>

<p>
所谓的“同源”，必须要求相应的URI在如下3个方面均是相同的：主机名称（域名/子域名或者IP地址）、
端口号、网络协议（Scheme，分别采用“http”和“https”协议的两个URI被视为不同源）
</p>

<p>
对于一段JavaScript脚本来说，其“源”与它存储的地址无关，而取决于脚本被加载的页面。比如在某个页面中通过script标签引用了来源于不同地方的两个JavaScript脚本，它们均与当前页面同源【也就是说js脚本与页面是否是同源取决于页面如果页面能够调到js脚本那就是同源的否则是跨域的】
</p>

```
<script src="http://www.a.com/scripts/a.js"></script>
<script src="http://www.b.me/scripts/b.js"></script>
```

<p>
除了script标签其它一些具有src属性的标签（比如img），它们均具有跨域加载资源的能力，所以同源策略对它们不做限制。	
</p>

<p>
同源策略主要限制了通过XMLHttpRequest实现的Ajax请求，如果请求的是一个“异源”地址，浏览器将不允许读取返回的内容。
</p>

#####2.跨域问题的解决方法

######1.JSONP

<p>
JSONP是利用script的src标签加载的脚本不受同源策略约束而采取的一种编程技巧，不是一种官方协议。由于具有src属性的HTML标签均通过HTTP-GET的方式来加载目标资源，JSONP只适用于HTTP-GET请求。
</p>

######2.CORS

<p>
基于Web的资源共享涉及到两个基本的角色，即资源的提供者和消费者。即显示在浏览器中的某个Web页面通过调用Web API的方式来获取它所需的资源，资源提供者为Web API本身，通过发送Ajax请求来调用Web API的JavaScript程序为资源的消费者。
</p>

<p>
CORS旨在定义一种规范让浏览器在接收到从提供者获取的资源时能够正确决定是否应该将此资源分发给消费者作进一步处理。CROS利用资源提供者的显式授权来决定目标资源是否应该与消费者共享。浏览器需要得到提供者的授权之后才会将其提供的资源分发给消费者。
</p>

<p>
资源获取请求被提供者接收之后，它可以根据该报头确定提供的资源需要共享给谁。资源提供者的授权通过一个名为“Access-Control-Allow-Origin”的响应报头来承载，其报头值表示得到授权的站点。一般来说，如果资源的提供者认可了当前请求的“Origin”报头携带的站点，那么它会将该站点作为“Access-Control-Allow-Origin”响应报头的值。
</p>

<p>
当浏览器接收到包含资源的响应之后，会提取此“Access-Control-Allow-Origin”响应报头的值。如果此值为“*”或者包含的源列表包含此前请求的源（即请求的“Origin”报头值），意味着资源的消费者获取了提供者获取和操作资源的权限，所以浏览器会允许JavaScript程序操作获取的资源。如果此响应报头不存在或者其值为“null”，客户端JavaScript程序针对资源的操作会被拒绝。

</p>

<p>
Cloud项目用的就是CORS解决的跨域问题在 API ：cross-domain.js中
</p>
